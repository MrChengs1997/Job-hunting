<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>vue_project</title>

 <link rel="Shortcut Icon" href="h/images/favicon.ico">
    <link rel="stylesheet" type="text/css" href="./src/style/css/style.css"/>
    <link rel="stylesheet" type="text/css" href="./src/style/css/external.min.css"/>
    <link rel="stylesheet" type="text/css" href="./src/style/css/popup.css"/>
    <script src="./src/style/js/jquery.1.10.1.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="./src/style/js/jquery.lib.min.js"></script>
    <script src="./src/style/js/ajaxfileupload.js" type="text/javascript"></script>
    <script type="text/javascript" src="./src/style/js/additional-methods.js"></script>

    <script type="text/javascript" src="./src/style/js/conv.js"></script>
  </head>
  <body>
    <div id="app"></div>



    <script type="text/javascript">

      $(document).ready(function(e) {
        $('.register_radio li input').click(function(e){
          $(this).parent('li').addClass('current').append('<em></em>').siblings().removeClass('current').find('em').remove();
        });

        $('#email').focus(function(){
          $('#beError').hide();
        });
        //验证表单
        $("#loginForm").validate({
          rules: {
            type:{
              required: true
            },
            email: {
              required: true,
              email: true
            },
            password: {
              required: true,
              rangelength: [6,16]
            },
            checkbox:{required:true}
          },
          messages: {
            type:{
              required:"请选择使用拉勾的目的"
            },
            email: {
              required: "请输入常用邮箱地址",
              email: "请输入有效的邮箱地址，如：vivi@lagou.com"
            },
            password: {
              required: "请输入密码",
              rangelength: "请输入6-16位密码，字母区分大小写"
            },
            checkbox: {
              required: "请接受拉勾用户协议"
            }
          },
          errorPlacement:function(label, element){/*
			    		if(element.attr("type") == "radio"){
			    			label.insertAfter($(element).parents('ul')).css('marginTop','-20px');
			    		}else if(element.attr("type") == "checkbox"){
			    			label.inserresult.contenttAfter($(element).parent()).css('clear','left');
			    		}else{
			    			label.insertAfter(element);
			    		} */
            /*modify nancy*/
            if(element.attr("type") == "radio"){
              label.insertAfter($(element).parents('ul')).css('marginTop','-20px');
            }else if(element.attr("type") == "checkbox"){
              label.insertAfter($(element).parent()).css('clear','left');
            }else{
              label.insertAfter(element);
            };
          },
          submitHandler:function(form){
            var type =$('input[type="radio"]:checked',form).val();
            var email =$('#email').val();
            var password =$('#password').val();
            var resubmitToken = $('#resubmitToken').val();

            var callback = $('#callback').val();
            var authType = $('#authType').val();
            var signature = $('#signature').val();
            var timestamp = $('#timestamp').val();

            $(form).find(":submit").attr("disabled", true);

            $.ajax({
              type:'POST',
              data: {email:email,password:password,type:type,resubmitToken:resubmitToken, callback:callback, authType:authType, signature:signature, timestamp:timestamp},
              url:ctx+'/user/register.json',
              dataType:'json'
            }).done(function(result) {
              $('#resubmitToken').val(result.resubmitToken);
              if(result.success){
                window.location.href=result.content;
              }else{
                $('#beError').text(result.msg).show();
              }
              $(form).find(":submit").attr("disabled", false);
            });
          }
        });
      });
    </script>
  </body>
</html>
